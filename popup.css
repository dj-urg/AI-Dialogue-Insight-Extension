/**
 * AI Chat Exporter - Popup Styles
 * Design System and Component Styles
 */

/* ============================================
   DESIGN SYSTEM - CSS CUSTOM PROPERTIES
   ============================================ */

:root {
  /* Primary Colors */
  --color-primary: #0060df;
  --color-primary-hover: #0250bb;
  --color-primary-active: #054096;

  /* Status Colors */
  --color-success: #12bc00;
  --color-success-bg: #e3f7e1;
  --color-success-border: #a5d6a7;
  --color-warning: #ff9400;
  --color-warning-bg: #fff4e5;
  --color-warning-border: #ffcc80;
  --color-error: #d70022;
  --color-error-bg: #ffe8e8;
  --color-error-border: #ef9a9a;
  --color-info: #0060df;
  --color-info-bg: #e0f0ff;
  --color-info-border: #90caf9;

  /* Neutral Colors */
  --color-text-primary: #15141a;
  --color-text-secondary: #5b5b66;
  --color-text-tertiary: #6e6e78; /* Darkened from #8f8f9d for WCAG AA compliance (4.5:1) */
  --color-border: #d7d7db;
  --color-background: #ffffff;
  --color-background-secondary: #f9f9fb;

  /* Focus */
  --color-focus: #0060df;
  --focus-ring: 0 0 0 2px rgba(0, 96, 223, 0.3);

  /* Font Stack */
  --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, 
                 "Helvetica Neue", Arial, sans-serif;

  /* Font Sizes */
  --font-size-xs: 11px;
  --font-size-sm: 13px;
  --font-size-base: 14px;
  --font-size-lg: 16px;
  --font-size-xl: 18px;

  /* Font Weights */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* Line Heights */
  --line-height-tight: 1.3;
  --line-height-normal: 1.5;
  --line-height-relaxed: 1.6;

  /* Spacing Scale */
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 12px;
  --space-lg: 16px;
  --space-xl: 24px;
  --space-2xl: 32px;

  /* Border Radius */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-full: 9999px;

  /* Transitions */
  --transition-fast: 100ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;

  /* Shadows */
  --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
  --shadow-md: 0 2px 4px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 4px 8px rgba(0, 0, 0, 0.15);
}

/* ============================================
   BASE STYLES
   ============================================ */

* {
  box-sizing: border-box;
}

body {
  /* Responsive width: 380px default, but flexible between 320-600px */
  width: 380px;
  min-width: 320px;
  max-width: 600px;
  /* Flexible padding that adapts to viewport size */
  padding: clamp(var(--space-md), 4vw, var(--space-lg));
  /* Limit vertical height to avoid excessive scrolling */
  max-height: 600px;
  overflow-y: auto;
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  background-color: var(--color-background);
  margin: 0;
}

/* Smooth scrolling for better UX */
html {
  scroll-behavior: smooth;
}

/* ============================================
   TYPOGRAPHY
   ============================================ */

h1,
h2,
h3 {
  margin: 0;
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
}

h1 {
  font-size: var(--font-size-xl);
}

h2 {
  font-size: var(--font-size-lg);
}

h3 {
  font-size: var(--font-size-base);
  margin-bottom: var(--space-md);
  color: var(--color-text-primary);
}

p {
  margin: 0;
}

ul {
  margin: 0;
  padding-left: 20px;
}

li {
  margin: var(--space-xs) 0;
}

strong {
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

/* ============================================
   STATUS COMPONENT (BEM)
   ============================================ */

.status {
  margin-bottom: var(--space-lg);
  padding: 10px var(--space-md);
  border-radius: var(--radius-sm);
  font-size: var(--font-size-sm);
  line-height: var(--line-height-normal);
  min-height: 40px;
  border: 1px solid;
}

/* Status Modifiers */
.status--supported {
  background-color: var(--color-success-bg);
  color: #2e7d32;
  border-color: var(--color-success-border);
}

.status--waiting {
  background-color: var(--color-warning-bg);
  color: #c44000; /* Darkened from #e65100 for WCAG AA compliance (4.5:1) */
  border-color: var(--color-warning-border);
}

.status--unsupported {
  background-color: var(--color-warning-bg);
  color: #c44000; /* Darkened from #e65100 for WCAG AA compliance (4.5:1) */
  border-color: var(--color-warning-border);
}

.status--error {
  background-color: var(--color-error-bg);
  color: #c62828;
  border-color: var(--color-error-border);
}

/* ============================================
   BUTTON COMPONENT (BEM)
   ============================================ */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  padding: var(--space-md);
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  line-height: var(--line-height-normal);
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background-color var(--transition-fast);
}

/* Button Primary Modifier */
.btn--primary {
  background-color: var(--color-primary);
  color: var(--color-background);
}

.btn--primary:hover:not(:disabled) {
  background-color: var(--color-primary-hover);
}

.btn--primary:active:not(:disabled) {
  background-color: var(--color-primary-active);
}

.btn--primary:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.btn--primary:disabled {
  background-color: #bdbdbd;
  cursor: not-allowed;
  opacity: 0.6;
}

/* ============================================
   INFO SECTION COMPONENT (BEM)
   ============================================ */

.info {
  margin-top: var(--space-md);
  padding: 10px var(--space-md);
  background-color: var(--color-background-secondary);
  border-left: 3px solid var(--color-primary);
  font-size: var(--font-size-xs);
  line-height: var(--line-height-normal);
  color: var(--color-text-secondary);
}

.info__heading {
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--space-xs);
}

.info__list {
  margin: var(--space-sm) 0 0 0;
  padding-left: 20px;
}

.info__list-item {
  margin: var(--space-xs) 0;
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

.hidden {
  display: none;
}

.visually-hidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ============================================
   HEADER COMPONENT (BEM)
   ============================================ */

.popup-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  /* Flexible spacing that adapts to viewport size */
  padding-bottom: clamp(var(--space-md), 3vw, var(--space-lg));
  border-bottom: 1px solid var(--color-border);
  margin-bottom: clamp(var(--space-md), 3vw, var(--space-lg));
  /* Allow wrapping on very narrow viewports */
  flex-wrap: wrap;
  gap: var(--space-sm);
}

.popup-header__title {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
}

.popup-header__icon {
  color: var(--color-primary);
  flex-shrink: 0;
}

.popup-header__text {
  /* Responsive font size that scales with viewport */
  font-size: clamp(var(--font-size-lg), 4vw, var(--font-size-xl));
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
}

.popup-header__platform {
  flex-shrink: 0;
}

/* ============================================
   PLATFORM BADGE COMPONENT (BEM)
   ============================================ */

.platform-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-xs);
  padding: var(--space-xs) var(--space-sm);
  border-radius: var(--radius-full);
  font-size: var(--font-size-xs);
  font-weight: var(--font-weight-medium);
  background-color: var(--color-background-secondary);
  border: 1px solid var(--color-border);
}

.platform-badge__icon {
  flex-shrink: 0;
  width: 14px;
  height: 14px;
}

.platform-badge__name {
  color: var(--color-text-primary);
  white-space: nowrap;
}

/* Platform-specific color variants */
.platform-badge--chatgpt {
  border-color: #10a37f;
  background-color: #e6f7f3;
}

.platform-badge--chatgpt .platform-badge__icon {
  color: #10a37f;
}

.platform-badge--chatgpt .platform-badge__name {
  color: #0a6b52; /* Darkened from #0d8968 for WCAG AA compliance (4.5:1) */
}

.platform-badge--claude {
  border-color: #d97706;
  background-color: #fef3c7;
}

.platform-badge--claude .platform-badge__icon {
  color: #d97706;
}

.platform-badge--claude .platform-badge__name {
  color: #b45309;
}

.platform-badge--copilot {
  border-color: #0078d4;
  background-color: #e6f2ff;
}

.platform-badge--copilot .platform-badge__icon {
  color: #0078d4;
}

.platform-badge--copilot .platform-badge__name {
  color: #005a9e;
}

.platform-badge--deepseek {
  border-color: #7c3aed;
  background-color: #f3e8ff;
}

.platform-badge--deepseek .platform-badge__icon {
  color: #7c3aed;
}

.platform-badge--deepseek .platform-badge__name {
  color: #6d28d9;
}

.platform-badge--gemini {
  border-color: #4285f4;
  background-color: #e8f0fe;
}

.platform-badge--gemini .platform-badge__icon {
  color: #4285f4;
}

.platform-badge--gemini .platform-badge__name {
  color: #1967d2;
}

/* ============================================
   MAIN CONTENT AREA
   ============================================ */

/* ============================================
   STATUS CARD COMPONENT (BEM)
   ============================================ */

.status-card {
  display: flex;
  gap: clamp(var(--space-sm), 2vw, var(--space-md));
  /* Flexible padding that adapts to viewport size */
  padding: clamp(var(--space-sm), 2.5vw, var(--space-md));
  margin-bottom: clamp(var(--space-md), 3vw, var(--space-lg));
  border-radius: var(--radius-md);
  border-left: 4px solid;
  background-color: var(--color-background-secondary);
}

.status-card__icon {
  flex-shrink: 0;
  display: flex;
  align-items: flex-start;
  padding-top: 2px;
}

/* Hide all icons by default */
.status-card__icon .icon {
  display: none;
}

.status-card__content {
  flex: 1;
  min-width: 0;
}

.status-card__message {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
  margin-bottom: 0;
  /* Allow text to wrap gracefully */
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Only show detail if it has content */
.status-card__detail:not(:empty) {
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
  margin-top: var(--space-xs);
  /* Allow text to wrap gracefully */
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.status-card__detail:empty {
  display: none;
}

/* ============================================
   STATUS CARD STATE MODIFIERS
   ============================================ */

/* Success State - Green with Checkmark */
.status-card--success {
  background-color: var(--color-success-bg);
  border-left-color: var(--color-success);
}

.status-card--success .status-card__icon {
  color: var(--color-success);
}

.status-card--success .icon--success {
  display: block;
}

.status-card--success .status-card__message {
  color: #2e7d32; /* Dark green for WCAG AA contrast (7.5:1 on light bg) */
}

/* Warning State - Orange with Warning Triangle */
.status-card--warning {
  background-color: var(--color-warning-bg);
  border-left-color: var(--color-warning);
}

.status-card--warning .status-card__icon {
  color: #c44000; /* Darkened from #e65100 for WCAG AA compliance (4.5:1) */
}

.status-card--warning .icon--warning {
  display: block;
}

.status-card--warning .status-card__message {
  color: #c44000; /* Darkened from #e65100 for WCAG AA compliance (4.5:1) */
}

/* Error State - Red with X Circle */
.status-card--error {
  background-color: var(--color-error-bg);
  border-left-color: var(--color-error);
}

.status-card--error .status-card__icon {
  color: var(--color-error);
}

.status-card--error .icon--error {
  display: block;
}

.status-card--error .status-card__message {
  color: #c62828; /* Dark red for WCAG AA contrast (6.5:1 on light bg) */
}

/* Loading State - Blue with Spinner */
.status-card--loading {
  background-color: var(--color-info-bg);
  border-left-color: var(--color-info);
}

.status-card--loading .status-card__icon {
  color: var(--color-info);
}

.status-card--loading .icon--loading {
  display: flex;
}

.status-card--loading .status-card__message {
  color: #1565c0; /* Dark blue for WCAG AA contrast (5.8:1 on light bg) */
}

/* Info State - Blue with Info Circle */
.status-card--info {
  background-color: var(--color-info-bg);
  border-left-color: var(--color-info);
}

.status-card--info .status-card__icon {
  color: var(--color-info);
}

.status-card--info .icon--info {
  display: block;
}

.status-card--info .status-card__message {
  color: #1565c0; /* Dark blue for WCAG AA contrast (5.8:1 on light bg) */
}

/* ============================================
   LOADING SPINNER COMPONENT (BEM)
   ============================================ */

/* Standalone spinner component for loading states */
.spinner {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
}

.spinner__svg {
  width: 100%;
  height: 100%;
  animation: spinner-rotate 1s linear infinite;
}

.spinner__circle {
  fill: none;
  stroke: currentColor;
  stroke-width: 2;
  stroke-linecap: round;
  stroke-dasharray: 50;
  stroke-dashoffset: 25;
  animation: spinner-dash 1.5s ease-in-out infinite;
  transform-origin: center;
}

/* Rotation animation for the entire spinner */
@keyframes spinner-rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* Dash animation for the circle stroke */
@keyframes spinner-dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }
  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }
  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* Legacy spinner animation for backward compatibility */
.icon--loading {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* ============================================
   PRIMARY ACTION BUTTON COMPONENT (BEM)
   ============================================ */

.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-sm);
  width: 100%;
  padding: var(--space-md) var(--space-lg);
  font-family: var(--font-family);
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-normal);
  border: none;
  border-radius: var(--radius-md);
  cursor: pointer;
  /* Smooth transitions for all interactive states */
  transition: background-color var(--transition-fast), 
              transform var(--transition-fast),
              box-shadow var(--transition-fast),
              opacity var(--transition-fast);
  /* Ensure minimum touch target size */
  min-width: 44px;
  min-height: 44px;
}

.btn__icon {
  flex-shrink: 0;
  width: 16px;
  height: 16px;
}

/* When button icon is a spinner */
.btn__icon.spinner {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.btn__text {
  /* Ensure text doesn't wrap */
  white-space: nowrap;
}

/* Button Size Modifiers */
.btn--large {
  /* 48px height for touch-friendliness (exceeds 44px minimum) */
  min-height: 48px;
  padding: var(--space-md) var(--space-lg);
}

/* Button Primary Modifier */
.btn--primary {
  background-color: var(--color-primary);
  color: var(--color-background);
}

/* Hover State - Darker blue background */
.btn--primary:hover:not(:disabled) {
  background-color: var(--color-primary-hover);
}

/* Active State - Even darker blue with subtle press effect */
.btn--primary:active:not(:disabled) {
  background-color: var(--color-primary-active);
  transform: translateY(1px);
}

/* Focus State - Blue focus ring for keyboard navigation */
.btn--primary:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

/* Disabled State - Gray with reduced opacity */
.btn--primary:disabled {
  background-color: #757575; /* Darkened from #bdbdbd for WCAG AA compliance (4.5:1) */
  cursor: not-allowed;
  opacity: 1; /* Removed opacity to maintain contrast */
}

/* Responsive button sizing for narrow viewports */
@media (max-width: 360px) {
  .btn {
    font-size: var(--font-size-sm);
    padding: var(--space-sm) var(--space-md);
  }
  
  .btn--large {
    min-height: 44px; /* Maintain minimum touch target */
  }
}

/* ============================================
   FILE PREVIEW COMPONENT (BEM)
   ============================================ */

.file-preview {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  /* Flexible padding that adapts to viewport size */
  padding: clamp(var(--space-sm), 2.5vw, var(--space-md));
  margin-bottom: clamp(var(--space-md), 3vw, var(--space-lg));
  border-radius: var(--radius-md);
  background-color: var(--color-info-bg);
  border: 1px solid var(--color-info-border);
  /* Smooth animation when shown */
  animation: slideDown var(--transition-base) ease-out;
}

.file-preview__icon {
  flex-shrink: 0;
  color: var(--color-info);
  width: 16px;
  height: 16px;
}

.file-preview__label {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-secondary);
  flex-shrink: 0;
}

.file-preview__name {
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  /* Allow text to wrap on narrow viewports */
  word-break: break-word;
  /* Truncate with ellipsis if too long */
  overflow: hidden;
  text-overflow: ellipsis;
  /* Show full name on hover */
  white-space: nowrap;
}

/* Show full filename on hover for long names */
.file-preview__name:hover {
  white-space: normal;
  word-break: break-all;
}

/* Responsive adjustments for narrow viewports */
@media (max-width: 360px) {
  .file-preview {
    padding: var(--space-sm);
    margin-bottom: var(--space-md);
    flex-wrap: wrap;
  }

  .file-preview__label,
  .file-preview__name {
    font-size: var(--font-size-xs);
  }
}

/* ============================================
   INFO SECTION COMPONENT (BEM)
   ============================================ */

.info-section {
  /* Flexible spacing that adapts to viewport size */
  margin-top: clamp(var(--space-md), 3vw, var(--space-lg));
  border: 1px solid var(--color-border);
  border-radius: var(--radius-md);
  overflow: hidden;
  background-color: var(--color-background);
}

/* Summary/Toggle Button */
.info-section__toggle {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  width: 100%;
  /* Flexible padding that adapts to viewport size */
  padding: clamp(var(--space-sm), 2.5vw, var(--space-md));
  background-color: var(--color-background-secondary);
  cursor: pointer;
  list-style: none;
  user-select: none;
  /* Smooth transition for background color on hover */
  transition: background-color var(--transition-fast);
  /* Remove default marker */
  -webkit-appearance: none;
  appearance: none;
}

/* Remove default details marker in all browsers */
.info-section__toggle::-webkit-details-marker {
  display: none;
}

.info-section__toggle::marker {
  display: none;
}

/* Hover state for better interactivity */
.info-section__toggle:hover {
  background-color: #ededf0; /* Slightly darker than secondary background */
}

/* Focus state for keyboard navigation */
.info-section__toggle:focus-visible {
  outline: none;
  box-shadow: inset var(--focus-ring);
  background-color: #ededf0;
}

/* Info icon on the left */
.info-section__icon {
  flex-shrink: 0;
  color: var(--color-primary);
  width: 16px;
  height: 16px;
}

/* Title text */
.info-section__title {
  flex: 1;
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-medium);
  color: var(--color-text-primary);
}

/* Chevron icon that rotates on open/close */
.info-section__chevron {
  flex-shrink: 0;
  color: var(--color-text-secondary);
  width: 12px;
  height: 12px;
  /* Smooth rotation animation */
  transition: transform var(--transition-base);
  transform-origin: center;
}

/* Rotate chevron 180 degrees when details is open */
.info-section[open] .info-section__chevron {
  transform: rotate(180deg);
}

/* Content area with smooth expand/collapse */
.info-section__content {
  /* Flexible padding that adapts to viewport size */
  padding: clamp(var(--space-md), 3vw, var(--space-lg));
  /* Subtle background to distinguish from main content */
  background-color: var(--color-background-secondary);
  border-top: 1px solid var(--color-border);
  /* Smooth animation for content reveal */
  animation: slideDown var(--transition-base) ease-out;
}

/* Smooth slide-down animation for content */
@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Content blocks (What this does, Privacy) */
.info-section__block {
  /* Flexible spacing that adapts to viewport size */
  margin-bottom: clamp(var(--space-md), 3vw, var(--space-lg));
}

.info-section__block:last-child {
  margin-bottom: 0;
}

/* Block headings */
.info-section__heading {
  font-size: var(--font-size-base);
  font-weight: var(--font-weight-semibold);
  color: var(--color-text-primary);
  margin-bottom: var(--space-sm);
}

/* Lists within blocks */
.info-section__list {
  margin: 0;
  padding-left: 20px;
  font-size: var(--font-size-sm);
  color: var(--color-text-secondary);
  line-height: var(--line-height-relaxed);
}

.info-section__list li {
  margin: var(--space-xs) 0;
}

/* ============================================
   FOOTER COMPONENT (BEM)
   ============================================ */

.popup-footer {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
  /* Flexible spacing that adapts to viewport size */
  padding-top: clamp(var(--space-md), 3vw, var(--space-lg));
  margin-top: clamp(var(--space-md), 3vw, var(--space-lg));
  border-top: 1px solid var(--color-border);
  /* Allow wrapping on very narrow viewports */
  flex-wrap: wrap;
}

.popup-footer__icon {
  flex-shrink: 0;
  color: var(--color-text-tertiary);
}

.popup-footer__text {
  font-size: var(--font-size-xs);
  color: var(--color-text-secondary);
  text-align: center;
}

/* ============================================
   FOCUS MANAGEMENT
   ============================================ */

/* Global focus styles for keyboard navigation */
*:focus-visible {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
}

/* Remove default focus styles for mouse users */
*:focus:not(:focus-visible) {
  outline: none;
}

/* Enhanced focus for interactive elements */
button:focus-visible,
summary:focus-visible,
a:focus-visible {
  outline: 2px solid var(--color-focus);
  outline-offset: 2px;
}

/* Ensure focus is visible on all interactive elements */
.btn:focus-visible {
  outline: none;
  box-shadow: var(--focus-ring);
}

.info-section__toggle:focus-visible {
  outline: none;
  box-shadow: inset var(--focus-ring);
  background-color: var(--color-border);
}

/* ============================================
   RESPONSIVE LAYOUT
   ============================================ */

/* Minimum width (320px) - Compact layout */
@media (max-width: 360px) {
  body {
    padding: var(--space-md);
  }
  
  .popup-header {
    padding-bottom: var(--space-md);
    margin-bottom: var(--space-md);
  }
  
  .popup-header__text {
    font-size: var(--font-size-lg);
  }
  
  .status-card {
    gap: var(--space-sm);
    padding: var(--space-sm);
    margin-bottom: var(--space-md);
  }

  .file-preview {
    padding: var(--space-sm);
    margin-bottom: var(--space-md);
  }

  .info-section {
    margin-top: var(--space-md);
  }
  
  .info-section__toggle {
    padding: var(--space-sm);
  }
  
  .info-section__content {
    padding: var(--space-md);
  }
  
  .info-section__block {
    margin-bottom: var(--space-md);
  }
  
  .popup-footer {
    padding-top: var(--space-md);
    margin-top: var(--space-md);
  }
}

/* Medium width (380-480px) - Default layout */
@media (min-width: 361px) and (max-width: 480px) {
  body {
    width: 380px;
  }
}

/* Large width (481-600px) - Spacious layout */
@media (min-width: 481px) {
  body {
    width: clamp(380px, 90vw, 600px);
    padding: var(--space-lg);
  }
  
  .popup-header {
    padding-bottom: var(--space-lg);
    margin-bottom: var(--space-lg);
  }
  
  .status-card {
    gap: var(--space-md);
    padding: var(--space-md);
    margin-bottom: var(--space-lg);
  }

  .file-preview {
    padding: var(--space-md);
    margin-bottom: var(--space-lg);
  }

  .info-section {
    margin-top: var(--space-lg);
  }
  
  .info-section__toggle {
    padding: var(--space-md);
  }
  
  .info-section__content {
    padding: var(--space-lg);
  }
  
  .info-section__block {
    margin-bottom: var(--space-lg);
  }
  
  .popup-footer {
    padding-top: var(--space-lg);
    margin-top: var(--space-lg);
  }
}

/* Ensure content doesn't overflow on any viewport size */
.popup-main {
  /* Allow content to flow naturally */
  overflow: visible;
}

/* Prevent horizontal overflow */
* {
  max-width: 100%;
}

/* Allow specific elements to use full width */
.btn,
.status-card,
.info-section,
.popup-header,
.popup-footer {
  max-width: none;
}
